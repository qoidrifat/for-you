<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pesan untuk Echy</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #1a1a1a;
            color: white;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
            padding: 20px;
            position: relative;
        }

        .container {
            max-width: 600px;
            width: 100%;
            text-align: center;
            z-index: 2;
            position: relative;
        }

        h1 {
            font-size: clamp(24px, 5vw, 32px);
            margin-bottom: 15px;
            color: #ff6b6b;
        }

        p {
            font-size: clamp(16px, 4vw, 20px);
            line-height: 1.6;
            margin-bottom: 20px;
            white-space: pre-wrap;
        }

        textarea {
            width: 100%;
            min-height: 120px;
            padding: 12px;
            margin: 15px 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: clamp(14px, 3.5vw, 16px);
            resize: vertical;
        }

        button {
            padding: 10px 20px;
            font-size: clamp(14px, 3.5vw, 16px);
            cursor: pointer;
            background: linear-gradient(45deg, #ff6b6b, #ff8e8e);
            color: white;
            border: none;
            border-radius: 25px;
            transition: all 0.3s ease;
            margin: 10px;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }

        .music-button {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            z-index: 1000;
        }

        .heart, .click-heart {
            position: fixed;
            pointer-events: none;
        }

        .heart {
            animation: float-heart linear infinite;
            font-size: clamp(20px, 5vw, 40px);
        }

        .click-heart {
            animation: click-animation 1.5s ease-out forwards;
            font-size: clamp(16px, 4vw, 30px);
        }

        .click-image {
            position: fixed;
            pointer-events: none;
            width: clamp(60px, 15vw, 100px);
            height: clamp(60px, 15vw, 100px);
            object-fit: cover;
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.5s ease-in-out, transform 1.5s ease-out;
        }

        @keyframes float-heart {
            0% { transform: translateY(100vh) scale(0); opacity: 1; }
            100% { transform: translateY(-100vh) scale(1); opacity: 0; }
        }

        @keyframes click-animation {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            50% { transform: scale(1.5) rotate(180deg); opacity: 0.8; }
            100% { transform: scale(0) rotate(360deg); opacity: 0; }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            .music-button {
                width: 35px;
                height: 35px;
                font-size: 18px;
            }

            button {
                padding: 8px 16px;
                margin: 5px;
            }
        }

        @media (max-height: 500px) and (orientation: landscape) {
            .container {
                margin: 60px auto;
            }
        }
    </style>
</head>
<body>
    <button id="musicButton" class="music-button">ðŸŽµ</button>
    <audio id="backgroundMusic" loop>
        <source src="backsound/Cry-Cigarettes_After_Sex.mp3" type="audio/mpeg">
    </audio>

    <div class="container">
        <h1 id="title">Hallo Echy</h1>
        <p id="message">Boleh minta waktunya sebentar?</p>
        <textarea id="userInput" placeholder="Tulis pesan kamu yaa..." style="display: none;"></textarea>
        <div>
            <button id="nextButton">Next</button>
            <button id="saveButton" style="display: none;">Save</button>
        </div>
    </div>

    <script>
        const musicButton = document.getElementById('musicButton');
        const backgroundMusic = document.getElementById('backgroundMusic');
        const title = document.getElementById('title');
        const message = document.getElementById('message');
        const userInput = document.getElementById('userInput');
        const nextButton = document.getElementById('nextButton');
        const saveButton = document.getElementById('saveButton');

        let isMusicPlaying = false;
        let currentMessageIndex = 0;

        const heartSymbols = ['ðŸ’—'];
        const messages = [
            { title: "Hallo Echy", message: "Boleh minta waktunya sebentar?" },
            { title: "", message: "Sebelumnya maaf yaa tiba-tiba ngechat lagi" },
            { title: "", message: "Aku mau minta bantuan kamu boleh? Ini perihal ada apa dan mengapa ada kejadian seperti ini." },
            { title: "", message: "Aku minta tolong bangetttt chyy, bolee yaaa? Hehehe." },
            { title: "", message: "Maaf kalo egoiss, bakalan aku jadiin noted buat kedepannya. Maaf banget kali ini ngerepotin kamuunya." },
            { title: "", message: "Ini sedikit yang aku pahami tentang diri aku, aku tu orangnya ngebosenin, ga pinter cari topik, gabisa mencairkan suasana, ga humoris, atau ada yang lain? Bisa kamu tambahin atau dikoreksi kok." },
            { title: "", message: "Kamu boleh banget terus-terang atau blak-blakan aja ngejelasinnya, bakal aku terima semuanya apapun itu." },
            { title: "", message: "Kamu ga perlu khawatir takut nyakitin hati aku atau apalah itu, just explain what you think about me." },
            { title: "", message: "Dan aku mau m ohon maaf bangett udah nguras banyak energi sama tenaga kamu selama ini, kamu pasti merasa tersiksa kan? I'm so sorry." },
            { title: "", message: "Terakhir nih." },
            { title: "", message: "Makasih banget loh udah mau kenal sama cowo kaya aku." },
            { title: "", message: "Udah mau luangin waktu kamu. " },
            { title: "", message: "Makasih udah mau kenal pribadiku yang ga semua orang tau." },
            { title: "", message: "Makasih udah pernah singgah di hati cowo seperti aku." },
            { title: "", message: "Btw aku ngerasa kita tu punya beberapa kesamaan loh, salah satu contohnya dalam hal keluarga." },
            { title: "", message: "FYI aja, ayahku gaada pas aku masi sd kelas 6 akhir. " },
            { title: "", message: "Gaada dalam artian pisah/cerai, dan aku satu-satunya anak laki-laki setelah abangku meninggal beberapa bulan sebelum cerai" },
            { title: "", message: "Aku gaminta kamu buat ngerasa kasian atau gimanaa, aku cuma pengen kamu tau aja." },
            { title: "", message: "Maaff yaa kalo yang barusan kurang nyambung. " },
            { title: "", message: "Maaff kalo selama ini aku banyak ngelakuin salah ke kamu, baik salah yang disengaja ataupun ga disengaja." },
            { title: "", message: "Kalo dunia lagi jahat sama kamu dan gaada seorangpun yang mau dengerin keluh kesah kamu. " },
            { title: "", message: "Kamu bisa ceritain apapun itu ke aku kok (itupun kalo kamu mau)." },
            { title: "", message: "Sehat-sehat yaa kedepannya, selamat melanjutkan perjalananmu wanita baik â˜º" },
            { title: "Terakhir", message: "Tinggalkan pesannya disini:" }
        ];

        musicButton.addEventListener('click', () => {
            if (isMusicPlaying) {
                backgroundMusic.pause();
                musicButton.textContent = 'ðŸŽµ';
            } else {
                backgroundMusic.play();
                musicButton.textContent = 'â¸ï¸';
            }
            isMusicPlaying = !isMusicPlaying;
        });

        document.addEventListener('click', function initMusic() {
            backgroundMusic.play();
            isMusicPlaying = true;
            musicButton.textContent = 'â¸ï¸';
            document.removeEventListener('click', initMusic);
        }, { once: true });

        backgroundMusic.volume = 0.3;

        document.addEventListener('touchstart', (e) => {
            if (!e.target.closest('button') && !e.target.closest('textarea')) {
                const touch = e.touches[0];
                createClickBurst(touch.clientX, touch.clientY);
            }
        });

        document.addEventListener('touchend', (e) => {
            e.preventDefault();
            e.target.click();
        });

        nextButton.addEventListener('click', () => {
            if (currentMessageIndex < messages.length - 1) {
                currentMessageIndex++;
                updateMessage();
            }
        });

        function updateMessage() {
            title.textContent = messages[currentMessageIndex].title;
            message.textContent = messages[currentMessageIndex].message;

            if (currentMessageIndex === messages.length - 1) {
                nextButton.style.display = 'none';
                userInput.style.display = 'block';
                saveButton.style.display = 'inline-block';
            }
        }

        saveButton.addEventListener('click', () => {
            const userInputValue = userInput.value.trim();
            if (userInputValue !== '') {
                const fullMessage = messages.map(msg => `${msg.title}\n${msg.message}`).join('\n\n');
                const finalMessage = `${fullMessage}\n\n${userInputValue}`;
                const blob = new Blob([finalMessage], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = 'pesan.txt';
                a.click();
                URL.revokeObjectURL(url);

                alert('Pesan kamu telah tersimpan!');
                userInput.value = '';
            } else {
                alert('Silakan tulis pesan terlebih dahulu sebelum menyimpan.');
            }
        });

        function createHeart() {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
            heart.style.left = Math.random() * 100 + 'vw';
            const size = Math.random() * 60 + 40;
            heart.style.fontSize = size + 'px';
            const animationDuration = Math.random() * 4 + 2;
            heart.style.animationDuration = animationDuration + 's';
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, animationDuration * 1000);
        }

        function createClickHeart(x, y) {
            const heart = document.createElement('div');
            heart.className = 'click-heart';
            heart.innerHTML = heartSymbols[Math.floor(Math.random() * heartSymbols.length)];
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            const size = Math.random() * 30 + 20;
            heart.style.fontSize = `${size}px`;
            heart.style.color = `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 0.7)`;
            document.body.appendChild(heart);

            setTimeout(() => {
                heart.remove();
            }, 1500);
        }

        function createClickBurst(x, y) {
            createClickHeart(x, y);
        }

        document.addEventListener('click', (e) => {
            if (e.target.id !== 'nextButton' && e.target.id !== 'saveButton' && e.target.id !== 'userInput') {
                createClickBurst(e.clientX, e.clientY);
            }
        });

        setInterval(() => {
            for (let i = 0; i < 3; i++) {
                createHeart();
            }
        }, 200);

        for (let i = 0; i < 30; i++) {
            createHeart();
        }
    </script>
</body>
</html>